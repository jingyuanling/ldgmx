<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>抽奖页面十连抽</title>
		<link rel="stylesheet" type="text/css" href="css/reset.css"/>
		<link rel="stylesheet" type="text/css" href="css/ten-even-draw-m.css"/>
		<script src="js/rem.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/jquery-2.2.4.min.js" type="text/javascript" charset="utf-8"></script>
    </style>
	</head>
	<body>
		<div class="ten-draw-tit">
			<img class="draw_back" src="img/back-draw.png"/>
			<p>幸运大转盘、新年送福运</p>
		</div>
		<div class="ten-draw-wrap">
			<div class="upper-bg-content"></div>
			<div class="down-bg-content"></div>
			<div class="upper-content-tit">
				<!--弹幕-->
				<div class="draw-barrage mask">
					<!--内容显示再这里-->
					<!--<p class="barrage-p"><img src="img/barrage.png"/>张先生   获得了一个颈椎枕   2018.03.19  20:52</p>-->
				</div>
				<img class="big-logo" src="img/big-logo.png"/>
				<img class="ruls-btn" src="img/ruls-btn.png"/>
			</div>
			<div class="even_draw">
				<div class="even_draw_content">
					<ul class="draw_content_ul">
						<li>
							<div class="draw_img">
								<img class="white" src="img/prize5.png"/>
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="gray" src="img/prize2.png"/>
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="white" src="img/prize1.png"/>
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="gray" src="img/prize7.png"/>
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="white" src="img/prize4.png"/>
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="gray" src="img/prize6.png"/>
							</div>
						</li>
						<li class="draw_two_btn">
							<canvas id="mapCanvas"></canvas>
							<div class="draw_img" id="draw_img">
								<input  class="one_drat_btn drat_btn" type="button" name="" id="" value="" />
								<input  class="ten_drat_btn drat_btn" type="button" name="" id="" value="" />
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="gray" src="img/prize2.png"/>
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="white" src="img/prize12.png"/>
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="gray" src="img/prize9.png"/>
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="white" src="img/prize10.png"/>
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="gray" src="img/prize11.png"/>
							</div>
						</li>
						<li>
							<div class="draw_img">
								<img class="white" src="img/prize3.png"/>
							</div>
						</li>
					</ul>
				</div>
			</div>
			<!--ruls弹出框-->
			<div class="ruls-alert-gray">
				<div class="ruls-alert">
					<p><span>1、</span>大转盘抽奖系统将在每天特定时间开放，每天上午 10：00~12：00， 下午15：00~17：00，晚上20：00~21：30限时开放），活动结束时间以网站公告为准。</p>
					<p><span>2、</span>每次抽奖消耗100个债权金，开放时间内，每天参与抽奖次数不限。</p>
					<p><span>3、</span>抽中的债权金将于10分钟之内冲入您的债权金账户中。</p>
					<p><span>4、</span>抽中的奖品将在活动结束3~5个工作日为您发出。</p>
					<p><span>5、</span>所有抽奖过程中，消耗的债权金均不予返还。</p>
					<p><span>6、</span>对于查实作弊行为，灵动·光明行有权利拒绝发放奖品。</p>
					<p><span>7、</span>灵动光明行商城在法律范围内保留本次活动的最终解释权。</p>
					<img class="double-arrow" src="img/double-arrow.png"/>
				</div>
		</div>
		<!--弹框-->
		<div class="draw-alert-gray">
			<div class="prize-alert-content">
				<img class="content_bg" src="img/alert-content-bg.png"/>
				<div class="alert-prize-zone">
					<img class="delete-alert-btn" src="img/delete-alert-btn.png"/>
					<ul class="alert-prize-zone-ul">
						<li>
							<div class="get-prize-img">
								<img src="img/iphon.png"/>
							</div>
							<p class="prize_name">iphone8<br>一台</p>
						</li>
						<li>
							<div class="get-prize-img">
								<img src="img/money.png"/>
							</div>
							<p class="prize_name">4999<br>现金红包</p>
						</li>
						<li>
							<div class="get-prize-img">
								<img src="img/zqj.png"/>
							</div>
							<p class="prize_name">588<br>债权金红包</p>
						</li>
						<li>
							<div class="get-prize-img">
								<img src="img/pillow.png"/>
							</div>
							<p class="prize_name">高端<br>颈椎枕</p>
						</li>
						<li>
							<div class="get-prize-img">
								<img src="img/zqj.png"/>
							</div>
							<p class="prize_name">588<br>债权金红包</p>
						</li>
						<li>
							<div class="get-prize-img">
								<img src="img/iphon.png"/>
							</div>
							<p class="prize_name">iphone8<br>一台</p>
						</li>
						<li>
							<div class="get-prize-img">
								<img src="img/money.png"/>
							</div>
							<p class="prize_name">4999<br>现金红包</p>
						</li>
						<li>
							<div class="get-prize-img">
								<img src="img/zqj.png"/>
							</div>
							<p class="prize_name">588<br>债权金红包</p>
						</li>
						<li>
							<div class="get-prize-img">
								<img src="img/pillow.png"/>
							</div>
							<p class="prize_name">高端<br>颈椎枕</p>
						</li>
						<li>
							<div class="get-prize-img">
								<img src="img/zqj.png"/>
							</div>
							<p class="prize_name">588<br>债权金红包</p>
						</li>
						<!--一连抽奖品-->
						<!--<li class="one-prize">
							<div class="get-prize-img">
								<img src="img/zqj-big.png"/>
							</div>
							<p class="prize_name">588债权金红包</p>
						</li>-->
					</ul>
				</div>
				<div class="award-btn">
					<strong>立即领取</strong>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		$('.delete-alert-btn').click(function(){
			$('.draw-alert-gray').hide();
		});
		$('.ruls-btn').click(function(){
			$('.ruls-alert-gray').show();
			$('.ruls-alert').animate({'right':'0'});
		})
		$('.double-arrow,.ruls-alert-gray').click(function(){
			$('.ruls-alert').animate({'right':'-5.8rem'});
			setTimeout(function(){
				$('.ruls-alert-gray').hide();
			},500);
		});
		document.getElementsByClassName("ruls-alert")[0].addEventListener("click",function(event){
            event.stopPropagation();    
        },false);
		//获取对象
		var canvas = document.getElementById("mapCanvas");
		var context = canvas.getContext('2d');
		var draw_img = document.getElementById('draw_img');
		//第三步:绘制游戏的背景图片
		var backgroundImg = new Image();
		backgroundImg.src = "img/draw-btn-bg.png";
		//创建一个背景图对象(只有一个)
		var background = {
			//属性
			x:0,
			y:0,
			w:canvas.width,
			h:canvas.height,
			//方法
			draw:function () {
				var row = Math.ceil(canvas.height / 113);//向上取整
				var col = Math.ceil(canvas.width / 372);
				//使用双层for循环嵌套绘制背景图
				for (var j = -col; j < col; j++) {
					for (var i = 0; i < row; i++) {
						context.drawImage(backgroundImg,j * 372 + this.x,i * 113,372,113);
					}
				}
			},
			//方法  背景移动
			move:function () {
				this.x++;
				//判断如果移动完一张背景图之后需要重置this.y的位置
				var row = Math.ceil(canvas.width / 372);
				if (this.x >= 372 * row) {
					this.x = 0;//重置
				}
			}
		}
		//最后一步:定义一个用来调用所有功能函数的总函数
		function beginGame () {
			//清空之前的画布
			context.clearRect(0,0,canvas.width,canvas.height);
			//第四步:调用绘制背景图和移动背景图的方法
			background.draw();
			background.move();
			//刷新 调用方法
			window.requestAnimationFrame(beginGame);
		}
		beginGame();
		//弹幕
		setInterval(function(){
			var _lable = $("<p class='barrage-p' style='display:inline-block;" + ";'>" + "<img src='img/barrage.png'/>" + '内容' + "</p>");
	        $(".mask").append(_lable.show());
	        init_barrage();
		},1000);

	    //初始化弹幕技术
	    function init_barrage() {
	        var _top = 0;
	        $(".mask p").show().each(function () {
                var _left = $(window).width();//浏览器最大宽度，作为定位left的值
                var _height = $('.mask').height();//浏览器最大高度
                var _pheight = $('.mask p').height();
                _top += _pheight*2;
                if (_top >= (_height-_pheight)) {
                    _top = 0;
                }
                $(this).css({left: _left, top: _top});

               //定时弹出文字
                var time = 20000;
                if ($(this).index() % 2 == 0) {
                    time = 15000;
                }

                $(this).animate({left: "-" + _left + "px"}, time, function () {
                    $(this).remove();
                });
            });

   		}
	</script>
</html>
